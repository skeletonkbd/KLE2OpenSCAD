import{p as e,a as t,d as n,o as r,c as o,b as a,w as s,v as l,t as i,e as c,f as d,g as p,h as u}from"./vendor.61200d64.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const h={data:()=>({RAW:"",KLE_data:[],CODE:"",displayCode:!1}),methods:{getData(){let e=this.RAW;if(e.length>0){e=e.replace(/([a-zA-Z]\d):/g,(function(){return'"'+arguments[1]+'":'})),e=e.replace(/([a-zA-Z][a-zA-Z]):/g,(function(){return'"'+arguments[1]+'":'})),e=e.replace(/([a-zA-Z]):/g,(function(){return'"'+arguments[1]+'":'})),e="["+e+"]";try{e=JSON.parse(e)}catch(t){alert("解析に失敗しました")}let r=n.Serial.deserialize(e);this.KLE_data=r.keys,this.displayCode=!0,console.log(r.keys)}},copy(){const e=this.$el.querySelector("#code").textContent;navigator.clipboard.writeText(e).then((()=>{alert("クリップボードにコピーしました")})).catch((e=>{console.error(e)}))}},computed:{generatedCode(){console.log("コード生成開始");let e="// KLE_data2OpenSCAD\n\n";return e+="pitch = 19.05; // キーピッチ(mm)\n",e+="hole = 14; // キースイッチの穴のサイズ(mm)\n\n",e+="// 0: x, 1: y, 2:r, 3:rx, 4:ry, 5:w, 6:h\n",e+="keys = [",this.KLE_data.forEach((function(t){e+="["+t.x+","+t.y+","+t.rotation_angle+","+t.rotation_x+","+t.rotation_y+","+t.width+","+t.height+"],"})),e+="];\n\n",e+="rotate([0,0,-90]) {\n    for(k=keys){\n        trans1_x = k[4] * pitch;\n        trans1_y = k[3] * pitch;\n        trans2_x = k[1] * pitch -trans1_x;\n        trans2_y = k[0] * pitch -trans1_y;\n        trans3_x = (k[6]-1) * pitch / 2;\n        trans3_y = (k[5]-1) * pitch / 2;\n        rotation = -k[2];\n        ofs=-(pitch-hole)/2;\n\n        translate([trans1_x,trans1_y,0])\n        rotate([0,0,rotation])\n        translate([trans2_x,trans2_y,0])\n        translate([trans3_x,trans3_y,0])\n        offset(ofs)\n        square(pitch);\n    }\n}",console.log(e),e}}};e("data-v-055d5ea3");const y={class:"container mx-auto py-10"},g=a("header",{class:"mb-5"},[a("h1",{class:"font-bold text-2xl"},"KLE2OpenSCAD"),a("p",null,[a("a",{href:"http://www.keyboard-layout-editor.com/",target:"_blank"},"Keyboard Layout Editor"),d("で作成したレイアウトをもとに、OpenSCADのコードを自動生成するツールです。 ")])],-1),f={class:"mb-5 p-3 bg-gray-100 border rounded"},b=a("h2",{class:"mb-2 font-bold"},"Keyboard Layout Editor Rawデータ",-1),m={class:"mb-5 text-center"},x={key:0,class:"mb-5 border bg-green-100 text-green-800 rounded relative"},_={class:"absolute top-0 right-0 p-2"},k={id:"code",class:"block whitespace-pre overflow-x-scroll p-5"};t(),h.render=function(e,t,n,d,p,u){return r(),o("div",y,[g,a("div",f,[b,s(a("textarea",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.RAW=t),class:"resize-y border rounded-md w-full p-2",placeholder:"ここに貼り付け…"},null,512),[[l,e.RAW]])]),a("div",m,[a("button",{class:"\n          bg-green-500\n          px-10\n          py-3\n          rounded\n          text-white\n          font-bold\n          text-xl\n          shadow\n          hover:bg-green-600\n        ",onClick:t[1]||(t[1]=(...e)=>u.getData&&u.getData(...e))}," Generate OpenSCAD code ")]),e.displayCode?(r(),o("div",x,[a("div",_,[a("span",{class:"\n            bg-green-200\n            text-green-600\n            p-1\n            rounded\n            hover:bg-green-400 hover:text-white\n          ",onClick:t[2]||(t[2]=(...e)=>u.copy&&u.copy(...e))},"Copy")]),a("pre",null,[a("code",k,i(u.generatedCode),1)])])):c("",!0)])},h.__scopeId="data-v-055d5ea3";u({setup:e=>(e,t)=>(r(),p(h))}).mount("#app");
